{% extends "base.html" %}
{% import "macro_heading.html" as headings %}
{% block content %}

    <ul class='navbar' id='blog-nav'>
        <li>
            <a class="toplevel" href='#'>Top Tags</a>
            <ul>
                {% for tag in tags %}
                    <li id="{{ tag}}"
                        {% if tag_selection %}
                            {% if tag is equalto tag_selection %}
                                class="highlight"
                            {% endif %}
                        {% endif %}
                    >
                        <a href="{{ url_for( "blog_tag", tag=tag) }}#blog-nav">
                            {% set freq = getkey( tag_freq, tag ) %}
                            {{ tag }} ({{ freq }})
                        </a>
                    </li>
                    {% set tag_highlight = False %}
                {% endfor %}
            </ul>
        </li>
        <li>
            <a class="toplevel" href='#'>All Tags</a>
        </li>
        <li>
            <a class="toplevel" href='#'>Empty</a>
        </li>
        <li>
            <a class="toplevel" href='#'>:)</a>
        </li>
        <li>
            <a class="toplevel" href='#'>:)</a>
        </li>
    </ul>

    <article id="blogs">
        
        {% call headings.article() %}
            Latest Blogs
            {% if tag_selection %}
                Tagged: {{ tag_selection }}
            {% endif %}
        {% endcall %}

    {% for page in pages %}
    <section id="{{ page.named }}">
            <header>
                <div class='headline'>
                    <div class='comments'>
                        <a href="http://www.nathanrosspowell.com{{ url_for("page", page_path=page.path) }}#disqus_thread" data-disqus-identifier="{{ url_for("page", page_path=page.path) }}">0</a>
                    </div>
                    <div class='date'>
                        {{ page.published }} - 
                    </div>
                    <div class='title'>
                        {{ page.title|title }}
                    </div>
                </div>
            </header>
                {% if page.short %}
                    {{ page.short }}...
                {% else %}
                    {{ page.body[:100] }}...
                {% endif %}
                {% if page.url %}
                    <a class='button' href="{{ url_for("page", page_path=page.path) }}" >
                        Continue Reading
                    </a>
                {% endif %}
        </section>
    {% endfor %}
    </article>

    <article named="blogroll">
        {% call headings.article() %}
            {{ blogroll.title }}
        {% endcall %}
        {{ blogroll.html|safe }}
    </article>
    
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'nathanrosspowell'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
{% endblock %}
