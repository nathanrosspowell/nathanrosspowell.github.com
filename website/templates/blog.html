{% extends "base.html" %}
{% import "macro_heading.html" as headings %}
{% block content %}

    <ul class='navbar' id='blog-nav'>
        <li>
            <a class="toplevel" href="{{ url_for( "blog_tags" ) }}">Top Tags</a>
            <ul>
                {% set item_type = "blog_tag" %}
                {% set items = top_tags_n %}
                {% set freq = tag_freq %}
                {% include "blog_tag_list.html" %}
                <li>
                <a href="{{ url_for( "blog_tags" ) }}" title="See more tags">More...</a>
                </li>
            </ul>
        </li>
        <li>
            <a class="toplevel" href="{{ url_for( "blog_tags" ) }}">All Tags</a>
            <ul>
                {% set item_type = "blog_tag" %}
                {% set items = all_tags_n %}
                {% set freq = tag_freq %}
                {% include "blog_tag_list.html" %}
                <li>
                <a href="{{ url_for( "blog_tags" ) }}" title="See more tags">More...</a>
                </li>
            </ul>
        </li>
        <li>
            <a class="toplevel" href='#'>Years</a>
            <ul>
                {% set item_type = "blog_archive" %}
                {% set items = arc_years_n %}
                {% set freq = arc_freq %}
                {% include "blog_archive_list.html" %}
                <li>
                <a href="{{ url_for( "blog_archives" ) }}" title="See more tags">More...</a>
                </li>
            </ul>
        </li>
        <li>
            <a class="toplevel" href='#'>Months</a>
            <ul>
                {% set item_type = "blog_archive" %}
                {% set items = arc_months_n %}
                {% set freq = arc_freq %}
                {% include "blog_archive_list.html" %}
                <li>
                <a href="{{ url_for( "blog_archives" ) }}" title="See more tags">More...</a>
                </li>
            </ul>
        </li>
        <li>
            <a class="toplevel" href='#'>Days</a>
            <ul>
                {% set item_type = "blog_archive" %}
                {% set items = arc_days_n %}
                {% set freq = arc_freq %}
                {% include "blog_archive_list.html" %}
                <li>
                <a href="{{ url_for( "blog_archives" ) }}" title="See more tags">More...</a>
                </li>
            </ul>
        </li>
    </ul>

    {% block blog_content %}

    <article id="blogs">
        
        {% call headings.article() %}
            {% if tag_selection %}
                Blogs Tagged: {{ tag_selection }}
            {% elif date_selection %}
                Blogs From: {{ date_selection }}
            {% else %}
                Latest Blogs
            {% endif %}
        {% endcall %}

    {% for page in pages %}
    <section id="{{ page.named }}">
            <header>
                <div class='headline'>
                    <div class='comments'>
                        {% include "disqus_comment_count.html" %}
                    </div>
                    <div class='date'>
                        {{ page.published }} - 
                    </div>
                    <div class='title'>
                        {{ page.title }}
                    </div>
                </div>
            </header>
                {% if page.short %}
                    {{ page.short }}...
                {% else %}
                    {{ page.body[:100] }}...
                {% endif %}
                {% if page.url %}
                    <a class='button' href="{{ url_for("page", page_path=page.path) }}" >
                        Continue Reading
                    </a>
                {% endif %}
        </section>
    {% endfor %}
    </article>

    <article id="blogroll">
        {% call headings.article() %}
            {{ blogroll.title }}
        {% endcall %}
        {{ blogroll.html|safe }}
    </article>
    
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'nathanrosspowell'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());

    </script>

    {% endblock blog_content %}

{% endblock %}
