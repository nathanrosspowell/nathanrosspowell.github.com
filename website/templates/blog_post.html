{% extends "blog.html" %}

{% block css_link %}
    <link rel="stylesheet" href="{{ url_for(".static", filename="css/sprite.css") }}" type="text/css" media="screen, projection"/>
    <link rel="stylesheet" href="{{ url_for(".static", filename="css/codehilite.css") }}" type="text/css" media="screen, projection"/>
{% endblock css_link %}

{% set comment_page = pages|first %}
{% block page_title %}
    {{ comment_page.title }}
{% endblock %}

{% block blog_content %}

    {% include "pages_index.html" %}

    {% for page in pages %}
    <article id="{{ page.named }}">
            <header>
                <div class='headline'>
                    <div class='date'>
                        {{ page.published }}
                    </div>
                    <div class='title'>
                        {{ page.title|title }}
                    </div>
                </div>
            </header>
            {{ page.html|safe }}
            <footer>
                <em>
                    Written by:
                </em>
                <strong>
                    {% if page.author %}
                        {{ page.author|title }}
                    {% else %}
                        <a href="{{ url_for( "connect" )}}"
                           title="Contact Nathan Ross Powell" 
                        >
                            Nathan Ross Powell
                        </a>
                    {% endif %}
                </strong>
                |
                <span class='newline'>
                    <em>
                        Tags:
                    </em>
                    {% for tag in page.tags %}
                        <a class='tags'
                            href="{{ url_for( "blog_tag", item=tag ) }}"
                            title="{{ "Blog filter for: " + tag }}"
                        >
                        {{ tag }}</a>{% if loop.last %}{% else %},{% endif %}
                    {% else %}
                        n/a
                    {% endfor %}
                </span>
                |
                <span class="markdown">
                    <a href="{{ page.source }}" title="Go to GitHub source">View markdown on GitHub</a>
                </span>
                {% set page_title = page.title %}
                {% set page_id = url_for( "page", page_path=page.path ) %}
                {% include "bookmarks_html.html" %}
                {% include "disqus_comment_thread.html" %}
            </footer>
        </article>
    {% endfor %}
    {% include "bookmarks.html" %}
{% endblock %}
