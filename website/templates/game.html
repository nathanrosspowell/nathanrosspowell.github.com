{% extends "article.html" %}
{% import "macro_heading.html" as headings %}

{% block css_link %}
    <link rel="stylesheet" href="{{ url_for(".static", filename="css/sprite.css") }}" type="text/css" media="screen, projection"/>
    {% include "slider_link.html" %}
{% endblock css_link %}
{% block js_link %}
    {% include "slider_js.html" %}
{% endblock js_link %}

{% macro youtube( url, params = "" ) -%}
    <iframe width="560" 
        height="315" 
        src="{{ "http://www.youtube.com/embed/" + url }}" 
        frameborder="0" 
        allowfullscreen
    >
    </iframe>
{%- endmacro %}

{% macro image( url ) -%}
    {% set imgurl = url_for( ".static", filename=url ) %} 
    <a href="{{ imgurl }}">
        <img src="{{ imgurl }}"
            height=200
            width=200
        />
    </a>
{%- endmacro %}

{% set article = pages|first %}
    
{% block page_title %}
    {{ article.title }}
{% endblock %}
    
{% block article_pages %}
    {% set numyoutube = article.youtubevideos|length %}
    {% if numyoutube is compare( ">", 0 ) %}
        <article id="youtube">
            {% call headings.article() %}
            {{ article.title }} Media 
            {% endcall %}
			<ul id="slider1">
            {% for url in article.pics %}
            <li>{{ image( url ) }}</li>
            {% endfor %}
                {% for url in article.youtubevideos %}
                <li>{{ youtube( url ) }}</li>
                {% endfor %}
            </ul>
        </article>
    {% endif %}
    <article id="summary">
        {% call headings.article() %}
            {{ article.title|title }}
            Summary
        {% endcall %}
        {{ article.html|safe }}
    </article>

{% endblock %}
