{% extends "article.html" %}
{% import "macro_heading.html" as headings %}

{% block article_css_link %}
    {% include "slider_link.html" %}
{% endblock article_css_link %}

{% block js_link %}
    {% include "slider_js.html" %}
{% endblock js_link %}

{% macro youtube( url, params = "" ) -%}
    <object width="560" height="315"><param name="movie" value="http://www.youtube.com/v/qveoRp8Vlrs?version=3&amp;hl=en_GB"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/{{ url }}" type="application/x-shockwave-flash" width="560" height="315" allowscriptaccess="always" allowfullscreen="true"></embed></object>
{%- endmacro %}

{% macro image( url ) -%}
    {% set imgurl = url_for( ".static", filename=url ) %} 
        <img src="{{ imgurl }}"
        />
{%- endmacro %}

{% set article = pages|first %}
    
{% block page_title %}
    {{ article.title }}
{% endblock %}
    
{% block article_pages %}
    {% set numyoutube = article.youtubevideos|length %}
    {% if numyoutube is compare( ">", 0 ) %}
        <article id="youtube">
            {% call headings.article() %}
            {{ article.title }} Media 
            {% endcall %}
			<ul id="slider1">
            {% for url in article.pics %}
            <li>{{ image( url ) }}</li>
            {% endfor %}
                {% for url in article.youtubevideos %}
                <li>{{ youtube( url ) }}</li>
                {% endfor %}
            </ul>
        </article>
    {% endif %}
    <article id="summary">
        {% call headings.article() %}
            {{ article.title|title }}
            Summary
        {% endcall %}
        {{ article.html|safe }}
    </article>

{% endblock %}
