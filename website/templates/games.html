{% extends "article.html" %}
{% import "macro_heading.html" as headings %}

{% block page_title %}
    Games
{% endblock %}
    
{% block article_pages %}

    {% set article = pages|first %}
    {% include "base_article.html" %} 

    <article id="gameslist">      
        {% call headings.article() %}
            Games List
        {% endcall %}

        {% for page in pages %}
        {% if loop.index is sameas 1 %}
        {% else %}
            <section id="{{ page.named }}"
                class=
                {% if page.major %}
                    "majorrelease"
                {% else %}
                    "minorrelease"
                {% endif %}
                >
                    <header>
                        <div class='headline'>
                            <div class='date'>
                                {% if page.published %}
                                    {{ page.published }} 
                                {% else %}
                                    Not Released
                                {% endif %}
                            </div>
                            -
                            <div class='title'>
                                <a href="{{ page.website}}">{{ page.title|title }}</a>
                            </div>
                        </div>
                    </header>
                    <div class="cover">
                        {% if page.website %}
                            <a href="{{ page.website}}">
                        {% endif %}
                        {% if page.cover %}
                            <!-- Change to pop up full size image -->
                            <img class="cover" src="{{ url_for( ".static", filename=page.cover ) }}" title="{{ page.title }}"/> 
                        {% endif %}
                        {% if page.website %}
                            </a>
                        {% endif %}
                    </div>
                    {% if page.short %}
                        {{ page.short }}..
                    {% else %}
                        {{ page.body[:400] }}
                        <a class='button'
                            href="{{ url_for("page", page_path=page.path) }}#summary"
                            title="Continue reading"    
                        >
                            ...
                        </a>
                    {% endif %}
                    {% if page.url %}
                        <p>
                            <a class='button' 
                               href="{{ url_for("page", page_path=page.path) }}"
                               title="Videos, pictures and full summary"
                            >
                               More media and infomation 
                            </a>
                        </p>
                    {% endif %}
                    <div class="buttons" >
                        {% include "games_bar.html" %}
                    </div>
                </section>
            {% endif %}
        {% endfor %}
    </article>
{% endblock %}
